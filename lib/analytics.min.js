"use strict";var OstrioTrackerClass;(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(){function e(){var e;this.screen=window.screen||screen,this.height=this.screen.height,this.width=this.screen.width,this.colorDepth=this.screen.colorDepth,this.pixelDepth=this.screen.pixelDepth,e=screen.orientation||screen.mozOrientation||screen.msOrientation,e&&e.type?this.orientation=e.type.split("-")[0]:this.orientation=this.detect()}return e.prototype.detect=function(){return this.width>=this.height?"landscape":"portrait"},e.prototype.toJson=function(){var e=window.innerWidth||window.clientHeight,t=window.innerHeight||window.clientHeight,n={};return this.width&&this.height&&(n.screen=this.width+"x"+this.height),e&&t&&(n.window=e+"x"+t),this.pixelDepth&&(n.pixelDepth=this.pixelDepth),this.colorDepth&&(n.colorDepth=this.colorDepth),this.orientation&&(n.orientation=this.orientation),JSON.stringify(n)},e}();OstrioTrackerClass=function(){function n(n){var o=this;o.track=e(o.track,o),o.getHref=e(o.getHref,o),o.addEvent=e(o.addEvent,o),o.pushEvent=e(o.pushEvent,o),o.removeEvent=e(o.removeEvent,o),o.screen=encodeURIComponent((new t).toJson()),o.location=location||window.location||document.location,o.currentHref="",o.followClick=!1,o.serverId=n;var r=document.getElementById("__tracking__");r||(r=document.createElement("div"),r.id="__tracking__",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",document.body.appendChild(r)),setTimeout(o.track,1);var i=function(e){var t=e.currentTarget;t&&t.href&&t.href!==o.currentHref+"#"&&t.href!==o.currentHref+"/#"&&(o.followClick=!0,~t.href.indexOf(o.location.origin)?o.track("&event=click"):o.track("&event=click&exitPage="+o.getHref()+"&follow="+t.href,!1))};o.listenLinks=function(){for(var e=Array.prototype.slice.call(document.getElementsByTagName("a")),t=e.length-1;t>=0;t--)o.removeEvent(e[t],"click",i),o.addEvent(e[t],"click",i)},o.listenLinks();var a=window.MutationObserver||window.WebKitMutationObserver;if(a){var s=new a(function(e){for(var t=e.length-1;t>=0;t--){for(var n=e[t].addedNodes.length-1;n>=0;n--)e[t].addedNodes[n].nodeName&&"A"===e[t].addedNodes[n].nodeName&&o.addEvent(e[t].addedNodes[n],"click",i);for(var r=e[t].removedNodes.length-1;r>=0;r--)e[t].removedNodes[r].nodeName&&"A"===e[t].removedNodes[r].nodeName&&o.removeEvent(e[t].removedNodes[r],"click",i)}});s.observe(document.body,{childList:!0,subtree:!0})}else o.addEvent(document.body,"DOMSubtreeModified",o.listenLinks);o.addEvent(window,"hashchange",function(){o.followClick||o.track("&event=hashchange")}),o.addEvent(window,"popstate",function(){o.followClick||o.track("&event=popstate")}),o.addEvent(window,"beforeunload",function(){o.followClick||o.track("&exitPage="+o.getHref(),!1)}),o.addEvent(document,"beforeunload",function(){o.followClick||o.track("&exitPage="+o.getHref(),!1)}),o.addEvent(document.body,"beforeunload",function(){o.followClick||o.track("&exitPage="+o.getHref(),!1)});var c=window.History||History||window.history||history;c&&c.Adapter&&c.Adapter.bind(window,"statechange",function(){o.followClick||o.track("&event=statechange")}),setInterval(function(){o.currentHref===o.location.href||o.followClick||(o.track("&event=interval"),o.listenLinks())},750);var d=window.onerror;window.onerror=function(e,t,n){o.pushEvent("[Global Error]","Error: "+e+" File: "+t+" On line: "+n),d&&d.apply(this,arguments)}}return n.prototype.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},n.prototype.removeEvent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},n.prototype.pushEvent=function(e,t){if(e&&t&&e.length&&t.length){var n={};t="[Global Error]"===e?t.trim().substring(0,512):t.trim().substring(0,64),n[e.trim().substring(0,24)]=t,this.track("&pushEvent="+encodeURIComponent(JSON.stringify(n)))}else console.warn("[ostrio] [tracking] [pushEvent]: Can't add event without key or value, both arguments must present, and be a {String}!")},n.prototype.getHref=function(){return encodeURIComponent(this.location.href)},n.prototype.track=function(e,t){e||(e="");var n=this,o=function(){if(n.currentHref!==n.location.href||~e.indexOf("follow")||~e.indexOf("pushEvent")){var t=n.getHref(),o=encodeURIComponent(document.title),r=encodeURIComponent(document.referrer),i=navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"null";document.getElementById("__tracking__").innerHTML='<img src="https://analytics.ostr.io/'+n.serverId+".gif?referral="+r+"&pageTitle="+o+"&screen="+n.screen+"&locale="+i+"&page="+t+e+'" width="0" height="0" style="width:0px;height:0px;position:absolute;top:-1000px;left:-1000px" />',n.currentHref=n.location.href,setTimeout(function(){n.followClick=!1,n.listenLinks()},25)}};t===!1?o():setTimeout(o,1)},n}()}).call(this);